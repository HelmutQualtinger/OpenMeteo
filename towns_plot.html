
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1 { color: #333; }
        #map { width: 100%; height: 800px; }
        .legend { margin-top: 20px; }
        .legend-item { margin: 5px 0; }
        .color-box { display: inline-block; width: 20px; height: 20px; margin-right: 10px; vertical-align: middle; }
    </style>
</head>
<body>
    <h1>Towns in Europe by Country</h1>
    <div id="map"></div>
    <div class="legend">
        <h3>Countries</h3>
        <div class="legend-item"><div class="color-box" style="background-color: #ED2939;"></div>Austria (AT)</div>
        <div class="legend-item"><div class="color-box" style="background-color: #FF0000;"></div>Switzerland (CH)</div>
        <div class="legend-item"><div class="color-box" style="background-color: #009246;"></div>Italy (IT)</div>
    </div>
    <script>
        var towns = [{"name": "Wien", "latitude": 48.2082, "longitude": 16.3738, "country": "AT"}, {"name": "Graz", "latitude": 47.0707, "longitude": 15.4395, "country": "AT"}, {"name": "Linz", "latitude": 48.306, "longitude": 14.2858, "country": "AT"}, {"name": "Salzburg", "latitude": 47.8095, "longitude": 13.055, "country": "AT"}, {"name": "Innsbruck", "latitude": 47.2625, "longitude": 11.4027, "country": "AT"}, {"name": "Klagenfurt", "latitude": 46.6247, "longitude": 14.3093, "country": "AT"}, {"name": "Villach", "latitude": 46.6029, "longitude": 14.8749, "country": "AT"}, {"name": "Wels", "latitude": 48.1827, "longitude": 14.2919, "country": "AT"}, {"name": "Sankt P\u00f6lten", "latitude": 48.2083, "longitude": 15.6306, "country": "AT"}, {"name": "Hallein", "latitude": 47.6757, "longitude": 13.2042, "country": "AT"}, {"name": "Dornbirn", "latitude": 47.4474, "longitude": 9.7451, "country": "AT"}, {"name": "Bregenz", "latitude": 47.5034, "longitude": 9.7465, "country": "AT"}, {"name": "Feldkirch", "latitude": 47.2338, "longitude": 9.6019, "country": "AT"}, {"name": "Kufstein", "latitude": 47.5897, "longitude": 12.1729, "country": "AT"}, {"name": "Schwaz", "latitude": 47.2919, "longitude": 11.7153, "country": "AT"}, {"name": "W\u00f6rgl", "latitude": 47.4857, "longitude": 12.0728, "country": "AT"}, {"name": "Lienz", "latitude": 46.8269, "longitude": 12.7684, "country": "AT"}, {"name": "Reutte", "latitude": 47.4914, "longitude": 10.7175, "country": "AT"}, {"name": "Hoechst", "latitude": 47.4461, "longitude": 9.6539, "country": "AT"}, {"name": "Lustenau", "latitude": 47.4528, "longitude": 9.6958, "country": "AT"}, {"name": "Rankweil", "latitude": 47.4569, "longitude": 9.6842, "country": "AT"}, {"name": "Goetzis", "latitude": 47.4894, "longitude": 9.6897, "country": "AT"}, {"name": "Altach", "latitude": 47.4689, "longitude": 9.6522, "country": "AT"}, {"name": "Schaan", "latitude": 47.1758, "longitude": 9.5094, "country": "AT"}, {"name": "\u00d6tztal", "latitude": 47.265, "longitude": 10.915, "country": "AT"}, {"name": "Imst", "latitude": 47.2653, "longitude": 10.745, "country": "AT"}, {"name": "L\u00e4ngenfeld", "latitude": 47.26, "longitude": 10.98, "country": "AT"}, {"name": "Telfs", "latitude": 47.35, "longitude": 11.05, "country": "AT"}, {"name": "Bad Ischl", "latitude": 47.7128, "longitude": 13.6189, "country": "AT"}, {"name": "Zell am See", "latitude": 47.3172, "longitude": 12.7964, "country": "AT"}, {"name": "Bischofshofen", "latitude": 47.5981, "longitude": 13.205, "country": "AT"}, {"name": "Saalfelden", "latitude": 47.5428, "longitude": 12.6361, "country": "AT"}, {"name": "Bad Gastein", "latitude": 47.5189, "longitude": 13.1317, "country": "AT"}, {"name": "Bad Hofgastein", "latitude": 47.5372, "longitude": 13.1956, "country": "AT"}, {"name": "Wiener Neustadt", "latitude": 47.8137, "longitude": 16.2594, "country": "AT"}, {"name": "Steyr", "latitude": 48.0419, "longitude": 14.4394, "country": "AT"}, {"name": "Leonding", "latitude": 48.3419, "longitude": 14.2514, "country": "AT"}, {"name": "Traun", "latitude": 48.3618, "longitude": 14.3203, "country": "AT"}, {"name": "Krems", "latitude": 48.4144, "longitude": 15.5667, "country": "AT"}, {"name": "Eisenstadt", "latitude": 47.845, "longitude": 16.5225, "country": "AT"}, {"name": "Enns", "latitude": 48.1989, "longitude": 14.4733, "country": "AT"}, {"name": "Bad Ischl", "latitude": 47.7128, "longitude": 13.6189, "country": "AT"}, {"name": "V\u00f6cklabruck", "latitude": 48.0074, "longitude": 13.6465, "country": "AT"}, {"name": "Waidhofen an der Ybbs", "latitude": 48.0281, "longitude": 15.0361, "country": "AT"}, {"name": "Zwettl", "latitude": 48.6144, "longitude": 15.2003, "country": "AT"}, {"name": "Gmunden", "latitude": 48.0137, "longitude": 13.8011, "country": "AT"}, {"name": "Ried im Innkreis", "latitude": 48.2149, "longitude": 13.4901, "country": "AT"}, {"name": "Grieskirchen", "latitude": 48.2507, "longitude": 13.8347, "country": "AT"}, {"name": "Freistadt", "latitude": 48.5033, "longitude": 14.5081, "country": "AT"}, {"name": "Uster", "latitude": 47.3398, "longitude": 8.7065, "country": "CH"}, {"name": "Sitten", "latitude": 46.2181, "longitude": 7.5632, "country": "CH"}, {"name": "Wetzikon", "latitude": 47.3239, "longitude": 8.7954, "country": "CH"}, {"name": "Montreux", "latitude": 46.4334, "longitude": 6.9118, "country": "CH"}, {"name": "Rapperswil-Jona", "latitude": 47.2286, "longitude": 8.8149, "country": "CH"}, {"name": "Duebendorf", "latitude": 47.406, "longitude": 8.6112, "country": "CH"}, {"name": "Kriens", "latitude": 47.055, "longitude": 8.3025, "country": "CH"}, {"name": "Zug", "latitude": 47.1733, "longitude": 8.517, "country": "CH"}, {"name": "Affoltern am Albis", "latitude": 47.2856, "longitude": 8.4697, "country": "CH"}, {"name": "Altstetten", "latitude": 47.3742, "longitude": 8.4661, "country": "CH"}, {"name": "Wil", "latitude": 47.4791, "longitude": 8.7431, "country": "CH"}, {"name": "Wadenswil", "latitude": 47.2122, "longitude": 8.6847, "country": "CH"}, {"name": "Kilchberg", "latitude": 47.2908, "longitude": 8.5653, "country": "CH"}, {"name": "Adliswil", "latitude": 47.3031, "longitude": 8.5178, "country": "CH"}, {"name": "Urdorf", "latitude": 47.3561, "longitude": 8.3778, "country": "CH"}, {"name": "Spreitenbach", "latitude": 47.3769, "longitude": 8.3508, "country": "CH"}, {"name": "Dietikon", "latitude": 47.4333, "longitude": 8.4083, "country": "CH"}, {"name": "Buchs", "latitude": 47.4842, "longitude": 8.3792, "country": "CH"}, {"name": "Rohrbach", "latitude": 48.5547, "longitude": 13.6963, "country": "AT"}, {"name": "Ebensee", "latitude": 47.8014, "longitude": 13.8561, "country": "AT"}, {"name": "Tulln", "latitude": 48.3216, "longitude": 15.6311, "country": "AT"}, {"name": "Regensdorf", "latitude": 47.4592, "longitude": 8.43, "country": "CH"}, {"name": "Birmensdorf", "latitude": 47.4083, "longitude": 8.4325, "country": "CH"}, {"name": "Oetwil am See", "latitude": 47.3381, "longitude": 8.6714, "country": "CH"}, {"name": "Herrliberg", "latitude": 47.2903, "longitude": 8.7039, "country": "CH"}, {"name": "Feldmeilen", "latitude": 47.2761, "longitude": 8.7014, "country": "CH"}, {"name": "Meilen", "latitude": 47.2703, "longitude": 8.6964, "country": "CH"}, {"name": "Staefa", "latitude": 47.2567, "longitude": 8.7186, "country": "CH"}, {"name": "Kueesnacht", "latitude": 47.2947, "longitude": 8.578, "country": "CH"}, {"name": "Zollikon", "latitude": 47.3158, "longitude": 8.5942, "country": "CH"}, {"name": "Uetikon am See", "latitude": 47.3036, "longitude": 8.5992, "country": "CH"}, {"name": "Erlenbach", "latitude": 47.3156, "longitude": 8.5547, "country": "CH"}, {"name": "Faellanden", "latitude": 47.3236, "longitude": 8.5897, "country": "CH"}, {"name": "Greifensee", "latitude": 47.3536, "longitude": 8.6461, "country": "CH"}, {"name": "Volketswil", "latitude": 47.3714, "longitude": 8.6772, "country": "CH"}, {"name": "Bubikon", "latitude": 47.365, "longitude": 8.8131, "country": "CH"}, {"name": "Stockerau", "latitude": 48.4084, "longitude": 15.8244, "country": "AT"}, {"name": "Gm\u00fcnd", "latitude": 48.7539, "longitude": 14.9806, "country": "AT"}, {"name": "Horn", "latitude": 48.6747, "longitude": 15.6764, "country": "AT"}, {"name": "Szombathely", "latitude": 47.2256, "longitude": 16.6219, "country": "AT"}, {"name": "Bauma", "latitude": 47.3929, "longitude": 8.8381, "country": "CH"}, {"name": "\u00d6denburg", "latitude": 47.85, "longitude": 16.6, "country": "AT"}, {"name": "Fehraltorf", "latitude": 47.4058, "longitude": 8.8461, "country": "CH"}, {"name": "Neusiedl am See", "latitude": 47.9403, "longitude": 16.8508, "country": "AT"}, {"name": "Gro\u00df-Enzersdorf", "latitude": 48.1711, "longitude": 16.5311, "country": "AT"}, {"name": "S\u00fc\u00dfenbrunn", "latitude": 48.25, "longitude": 16.55, "country": "AT"}, {"name": "Stammersdorf", "latitude": 48.2667, "longitude": 16.5167, "country": "AT"}, {"name": "Breitenlee", "latitude": 48.25, "longitude": 16.55, "country": "AT"}, {"name": "Kagran", "latitude": 48.25, "longitude": 16.45, "country": "AT"}, {"name": "Aspern", "latitude": 48.2333, "longitude": 16.4833, "country": "AT"}, {"name": "Gossau", "latitude": 47.4239, "longitude": 8.8583, "country": "CH"}, {"name": "Andelfingen", "latitude": 47.6583, "longitude": 8.7225, "country": "CH"}, {"name": "Eglisau", "latitude": 47.6071, "longitude": 8.5525, "country": "CH"}, {"name": "Glattfelden", "latitude": 47.5644, "longitude": 8.6003, "country": "CH"}, {"name": "Frauenfeld", "latitude": 47.5536, "longitude": 8.8933, "country": "CH"}, {"name": "Amriswil", "latitude": 47.5328, "longitude": 9.0564, "country": "CH"}, {"name": "Romanshorn", "latitude": 47.5664, "longitude": 8.9631, "country": "CH"}, {"name": "Arbon", "latitude": 47.4667, "longitude": 9.43, "country": "CH"}, {"name": "Kreuzlingen", "latitude": 47.6658, "longitude": 8.765, "country": "CH"}, {"name": "Buchs", "latitude": 47.1922, "longitude": 9.4747, "country": "CH"}, {"name": "Sargans", "latitude": 47.4464, "longitude": 9.4461, "country": "CH"}, {"name": "Mels", "latitude": 47.4197, "longitude": 9.3844, "country": "CH"}, {"name": "Glarus", "latitude": 46.9583, "longitude": 9.0667, "country": "CH"}, {"name": "Schwyz", "latitude": 47.415, "longitude": 8.6658, "country": "CH"}, {"name": "Einsiedeln", "latitude": 47.1331, "longitude": 8.7603, "country": "CH"}, {"name": "Steinen", "latitude": 47.2183, "longitude": 8.6225, "country": "CH"}, {"name": "Stans", "latitude": 46.9609, "longitude": 8.3661, "country": "CH"}, {"name": "Sarnen", "latitude": 46.8678, "longitude": 8.2439, "country": "CH"}, {"name": "Meiringen", "latitude": 46.7328, "longitude": 8.3044, "country": "CH"}, {"name": "Burgdorf", "latitude": 47.1856, "longitude": 8.3319, "country": "CH"}, {"name": "Langenthal", "latitude": 47.2122, "longitude": 8.3922, "country": "CH"}, {"name": "Solothurn", "latitude": 47.2019, "longitude": 7.5347, "country": "CH"}, {"name": "Olten", "latitude": 47.3436, "longitude": 7.9083, "country": "CH"}, {"name": "Grenchen", "latitude": 47.1819, "longitude": 7.7733, "country": "CH"}, {"name": "Sursee", "latitude": 47.1722, "longitude": 8.1011, "country": "CH"}, {"name": "Hochdorf", "latitude": 47.1242, "longitude": 8.2342, "country": "CH"}, {"name": "Emmen", "latitude": 47.0639, "longitude": 8.3764, "country": "CH"}, {"name": "Adligenswil", "latitude": 47.0306, "longitude": 8.3686, "country": "CH"}, {"name": "Ebikon", "latitude": 47.1083, "longitude": 8.4281, "country": "CH"}, {"name": "Sins", "latitude": 47.2736, "longitude": 8.2986, "country": "CH"}, {"name": "Wettingen", "latitude": 47.4831, "longitude": 8.3089, "country": "CH"}, {"name": "Ennetbaden", "latitude": 47.4892, "longitude": 8.3039, "country": "CH"}, {"name": "Turgi", "latitude": 47.4928, "longitude": 8.355, "country": "CH"}, {"name": "Rheinfelden", "latitude": 47.5364, "longitude": 7.7894, "country": "CH"}, {"name": "Liestal", "latitude": 47.4833, "longitude": 7.7333, "country": "CH"}, {"name": "Baden", "latitude": 47.4714, "longitude": 8.3051, "country": "CH"}, {"name": "Aarau", "latitude": 47.3901, "longitude": 8.051, "country": "CH"}, {"name": "Brugg", "latitude": 47.4845, "longitude": 8.2063, "country": "CH"}, {"name": "Stadlau", "latitude": 48.25, "longitude": 16.4667, "country": "AT"}, {"name": "Strebersdorf", "latitude": 48.2833, "longitude": 16.5, "country": "AT"}, {"name": "Gerasdorf", "latitude": 48.2667, "longitude": 16.5333, "country": "AT"}, {"name": "F\u00fcnfhaus", "latitude": 48.1833, "longitude": 16.3667, "country": "AT"}, {"name": "Liesing", "latitude": 48.1389, "longitude": 16.4222, "country": "AT"}, {"name": "Mauer", "latitude": 48.1333, "longitude": 16.35, "country": "AT"}, {"name": "Perchtoldsdorf", "latitude": 48.1469, "longitude": 16.2583, "country": "AT"}, {"name": "Modling", "latitude": 48.0864, "longitude": 16.2875, "country": "AT"}, {"name": "Brunn am Gebirge", "latitude": 48.0761, "longitude": 16.25, "country": "AT"}, {"name": "Gro\u00df-Enzersdorf", "latitude": 48.1711, "longitude": 16.5311, "country": "AT"}, {"name": "Oberwart", "latitude": 47.2869, "longitude": 16.2225, "country": "AT"}, {"name": "Bellinzona", "latitude": 46.1978, "longitude": 9.0165, "country": "CH"}, {"name": "Locarno", "latitude": 46.1667, "longitude": 8.7833, "country": "CH"}, {"name": "Zalaegerszeg", "latitude": 47.2, "longitude": 16.1333, "country": "AT"}, {"name": "Trofaiach", "latitude": 47.5833, "longitude": 15.0333, "country": "AT"}, {"name": "Bruck an der Mur", "latitude": 47.5142, "longitude": 15.3761, "country": "AT"}, {"name": "M\u00fcrzzuschlag", "latitude": 47.5333, "longitude": 15.65, "country": "AT"}, {"name": "Zurich", "latitude": 47.3769, "longitude": 8.5472, "country": "CH"}, {"name": "Genf", "latitude": 46.2022, "longitude": 6.1432, "country": "CH"}, {"name": "Basel", "latitude": 47.5596, "longitude": 7.5886, "country": "CH"}, {"name": "Ascona", "latitude": 46.1581, "longitude": 8.7658, "country": "CH"}, {"name": "Mendrisio", "latitude": 45.8939, "longitude": 8.9813, "country": "CH"}, {"name": "Chiasso", "latitude": 45.8312, "longitude": 8.9465, "country": "CH"}, {"name": "Porrentruy", "latitude": 47.4481, "longitude": 7.0717, "country": "CH"}, {"name": "Bern", "latitude": 46.9479, "longitude": 7.4474, "country": "CH"}, {"name": "Lausanne", "latitude": 46.5197, "longitude": 6.6323, "country": "CH"}, {"name": "Winterthur", "latitude": 47.5, "longitude": 8.725, "country": "CH"}, {"name": "Luzern", "latitude": 47.0502, "longitude": 8.3093, "country": "CH"}, {"name": "Sankt Gallen", "latitude": 47.4229, "longitude": 9.3767, "country": "CH"}, {"name": "Lugano", "latitude": 46.0051, "longitude": 8.9463, "country": "CH"}, {"name": "Biel/Bienne", "latitude": 47.1384, "longitude": 7.2474, "country": "CH"}, {"name": "Thun", "latitude": 46.7569, "longitude": 7.6253, "country": "CH"}, {"name": "Koeniz", "latitude": 46.9055, "longitude": 7.4397, "country": "CH"}, {"name": "Chur", "latitude": 46.8547, "longitude": 9.5302, "country": "CH"}, {"name": "Davos", "latitude": 46.8055, "longitude": 9.8355, "country": "CH"}, {"name": "Delemont", "latitude": 47.3645, "longitude": 7.3388, "country": "CH"}, {"name": "Fribourg", "latitude": 46.805, "longitude": 7.1605, "country": "CH"}, {"name": "Yverdon-les-Bains", "latitude": 46.62, "longitude": 6.6406, "country": "CH"}, {"name": "Vevey", "latitude": 46.4621, "longitude": 6.8413, "country": "CH"}, {"name": "Pully", "latitude": 46.5045, "longitude": 6.6753, "country": "CH"}, {"name": "Nyon", "latitude": 46.3831, "longitude": 6.2402, "country": "CH"}, {"name": "Renens", "latitude": 46.5303, "longitude": 6.5809, "country": "CH"}, {"name": "Echallens", "latitude": 46.7084, "longitude": 6.6361, "country": "CH"}, {"name": "Morges", "latitude": 46.4967, "longitude": 6.5042, "country": "CH"}, {"name": "Aigle", "latitude": 46.3239, "longitude": 6.9344, "country": "CH"}, {"name": "Monthey", "latitude": 46.2774, "longitude": 6.7722, "country": "CH"}, {"name": "Martigny", "latitude": 46.1018, "longitude": 7.7512, "country": "CH"}, {"name": "Sierre", "latitude": 46.3018, "longitude": 7.5413, "country": "CH"}, {"name": "Ried-Brig", "latitude": 46.3117, "longitude": 8.2572, "country": "CH"}, {"name": "Bulle", "latitude": 46.6189, "longitude": 7.2594, "country": "CH"}, {"name": "Romont", "latitude": 46.6219, "longitude": 7.0583, "country": "CH"}, {"name": "La Chaux-de-Fonds", "latitude": 47.1007, "longitude": 6.8228, "country": "CH"}, {"name": "Le Locle", "latitude": 47.0525, "longitude": 6.7497, "country": "CH"}, {"name": "Rom", "latitude": 41.9028, "longitude": 12.4964, "country": "IT"}, {"name": "Mailand", "latitude": 45.4642, "longitude": 9.19, "country": "IT"}, {"name": "Neapel", "latitude": 40.8518, "longitude": 14.2681, "country": "IT"}, {"name": "Turin", "latitude": 45.0708, "longitude": 7.6869, "country": "IT"}, {"name": "Palermo", "latitude": 38.1157, "longitude": 13.3615, "country": "IT"}, {"name": "Schaffhausen", "latitude": 47.6973, "longitude": 8.6361, "country": "CH"}, {"name": "Neuenburg", "latitude": 47.001, "longitude": 6.9325, "country": "CH"}, {"name": "Genua", "latitude": 44.4056, "longitude": 8.9463, "country": "IT"}, {"name": "Bologna", "latitude": 44.4949, "longitude": 11.3426, "country": "IT"}, {"name": "Florenz", "latitude": 43.7696, "longitude": 11.2558, "country": "IT"}, {"name": "Venedig", "latitude": 45.4408, "longitude": 12.3155, "country": "IT"}, {"name": "Messina", "latitude": 38.1938, "longitude": 15.554, "country": "IT"}, {"name": "Verona", "latitude": 45.4384, "longitude": 10.9916, "country": "IT"}, {"name": "Bari", "latitude": 41.1171, "longitude": 16.8706, "country": "IT"}, {"name": "Catania", "latitude": 37.5085, "longitude": 15.0873, "country": "IT"}, {"name": "Triest", "latitude": 45.65, "longitude": 13.7789, "country": "IT"}, {"name": "Brescia", "latitude": 45.5387, "longitude": 10.2217, "country": "IT"}, {"name": "Parma", "latitude": 44.8015, "longitude": 10.3279, "country": "IT"}, {"name": "Pisa", "latitude": 43.7228, "longitude": 10.3966, "country": "IT"}, {"name": "Modena", "latitude": 44.6472, "longitude": 10.9252, "country": "IT"}, {"name": "Reggio di Calabria", "latitude": 38.1156, "longitude": 15.6915, "country": "IT"}, {"name": "Tarent", "latitude": 40.4772, "longitude": 17.2272, "country": "IT"}, {"name": "Perugia", "latitude": 43.1122, "longitude": 12.3896, "country": "IT"}, {"name": "Padua", "latitude": 45.406, "longitude": 11.8776, "country": "IT"}, {"name": "Palermo", "latitude": 38.1157, "longitude": 13.3615, "country": "IT"}, {"name": "Reggio di Emilia", "latitude": 44.6989, "longitude": 10.6294, "country": "IT"}, {"name": "Ravenna", "latitude": 44.4184, "longitude": 12.1939, "country": "IT"}, {"name": "Lecce", "latitude": 40.3569, "longitude": 18.172, "country": "IT"}, {"name": "Ancona", "latitude": 43.6158, "longitude": 13.5007, "country": "IT"}, {"name": "Cremona", "latitude": 45.1353, "longitude": 10.0253, "country": "IT"}, {"name": "Piacenza", "latitude": 45.0527, "longitude": 9.7028, "country": "IT"}, {"name": "Ferrara", "latitude": 44.8381, "longitude": 11.6256, "country": "IT"}, {"name": "Alessandria", "latitude": 44.9122, "longitude": 8.627, "country": "IT"}, {"name": "Asti", "latitude": 44.8956, "longitude": 8.1945, "country": "IT"}, {"name": "Trento", "latitude": 46.0664, "longitude": 11.1208, "country": "IT"}, {"name": "Bozen", "latitude": 46.4983, "longitude": 11.3361, "country": "IT"}, {"name": "Gorizia", "latitude": 45.9589, "longitude": 13.6197, "country": "IT"}, {"name": "Udine", "latitude": 46.0627, "longitude": 13.2347, "country": "IT"}, {"name": "Civitavecchia", "latitude": 42.0968, "longitude": 11.8036, "country": "IT"}, {"name": "Tivoli", "latitude": 41.9608, "longitude": 12.7951, "country": "IT"}, {"name": "Frascati", "latitude": 41.8033, "longitude": 12.6655, "country": "IT"}, {"name": "Siena", "latitude": 43.3185, "longitude": 11.3304, "country": "IT"}, {"name": "Arezzo", "latitude": 43.4653, "longitude": 11.8794, "country": "IT"}, {"name": "Lucca", "latitude": 43.8439, "longitude": 10.5035, "country": "IT"}, {"name": "Livorno", "latitude": 43.552, "longitude": 10.3038, "country": "IT"}, {"name": "Prato", "latitude": 43.8755, "longitude": 11.0968, "country": "IT"}, {"name": "Pistoia", "latitude": 43.9347, "longitude": 10.9169, "country": "IT"}, {"name": "Massa", "latitude": 44.0156, "longitude": 10.1372, "country": "IT"}, {"name": "Montecatini Terme", "latitude": 43.8819, "longitude": 10.7708, "country": "IT"}, {"name": "Chianti", "latitude": 43.2833, "longitude": 11.45, "country": "IT"}, {"name": "Riva del Garda", "latitude": 45.8855, "longitude": 10.8419, "country": "IT"}, {"name": "Meran", "latitude": 46.6669, "longitude": 11.1597, "country": "IT"}, {"name": "Bruneck", "latitude": 46.4094, "longitude": 11.9405, "country": "IT"}];

        // Separate towns by country
        var at_towns = towns.filter(t => t.country === 'AT');
        var ch_towns = towns.filter(t => t.country === 'CH');
        var it_towns = towns.filter(t => t.country === 'IT');

        // Create traces for each country
        var traces = [
            {
                x: at_towns.map(t => t.longitude),
                y: at_towns.map(t => t.latitude),
                mode: 'markers',
                type: 'scattergeo',
                name: 'Austria (AT)',
                text: at_towns.map(t => t.name + '<br>Lat: ' + t.latitude.toFixed(4) + '<br>Lon: ' + t.longitude.toFixed(4)),
                hovertemplate: '{text}<extra></extra>',
                marker: {
                    size: 6,
                    color: '#ED2939',
                    opacity: 0.8
                }
            },
            {
                x: ch_towns.map(t => t.longitude),
                y: ch_towns.map(t => t.latitude),
                mode: 'markers',
                type: 'scattergeo',
                name: 'Switzerland (CH)',
                text: ch_towns.map(t => t.name + '<br>Lat: ' + t.latitude.toFixed(4) + '<br>Lon: ' + t.longitude.toFixed(4)),
                hovertemplate: '{text}<extra></extra>',
                marker: {
                    size: 6,
                    color: '#FF0000',
                    opacity: 0.8
                }
            },
            {
                x: it_towns.map(t => t.longitude),
                y: it_towns.map(t => t.latitude),
                mode: 'markers',
                type: 'scattergeo',
                name: 'Italy (IT)',
                text: it_towns.map(t => t.name + '<br>Lat: ' + t.latitude.toFixed(4) + '<br>Lon: ' + t.longitude.toFixed(4)),
                hovertemplate: '{text}<extra></extra>',
                marker: {
                    size: 6,
                    color: '#009246',
                    opacity: 0.8
                }
            }
        ];

        var layout = {
            title: 'Towns in Europe by Country',
            geo: {
                scope: 'europe',
                showland: true,
                landcolor: 'rgb(243, 243, 243)',
                coastcolor: 'rgb(204, 204, 204)',
                projection: {type: 'natural earth'},
                lataxis: {range: [43, 49]},
                lonaxis: {range: [6, 17]}
            },
            hovermode: 'closest',
            margin: {l: 0, r: 0, t: 50, b: 0}
        };

        Plotly.newPlot('map', traces, layout, {responsive: true});
    </script>
</body>
</html>
